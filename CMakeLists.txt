# This file was generated by CMakeLists.txt
# Modify as u want.

set(target_name VulkanDepth)
set(target_src "main.cpp")
set(target_libs ${GLog_LIBRARIES} ${Vulkan_LIBRARIES} ${OpenCV_LIBRARIES} ${GLFW_LIBRARIES})
add_executable (${target_name} ${target_src})

add_custom_command(
	TARGET ${target_name} POST_BUILD

	# Compute Shaders
	COMMAND glslc shader.comp -o ${PROJECT_BINARY_DIR}/${target_name}/comp.spv
	COMMAND glslc shader.comp -o comp.spv
	DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/shaders/shader.comp

	COMMAND glslc img.comp -o ${PROJECT_BINARY_DIR}/${target_name}/imgcomp.spv
	COMMAND glslc img.comp -o imgcomp.spv
	DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/shaders/img.comp

	COMMAND glslc shader.vert -o ${PROJECT_BINARY_DIR}/${target_name}/vertex.spv
	COMMAND glslc shader.vert -o vertex.spv
	DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/shaders/shader.vert

	COMMAND glslc shader.frag -o ${PROJECT_BINARY_DIR}/${target_name}/frag.spv
	COMMAND glslc shader.frag -o frag.spv
	DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/shaders/shader.frag

	WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/shaders
	COMMENT "Compiling shaders"
	VERBATIM
)

target_link_libraries(${target_name} ${target_libs})
